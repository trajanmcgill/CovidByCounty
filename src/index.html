<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	
    <title>COVID-19 by County</title>
	<link rel="stylesheet" type="text/css" href="styles/index.css" />
</head>
<body>
	<div v-cloak id="Everything">
		<div id="ColumnsContainer">
			<div id="MapColumn">
				<div>
					<h1>COVID-19 by U.S. County: <span id="ConfigPhrase">{{ mapConfigPhrase }}</span></h1>
				</div>

				<div id="MapContainer">
					<object id="SvgObject" type="image/svg+xml" data="images/Usa_counties_large.svg?ver=3">
						Browser not supported.
					</object>
					<img id="DragMap" src="images/Usa_counties_large.png">
					<div id="ZoomButtonContainer">
						<button id="BtnZoomIn" type="button">+</button>
						<button id="BtnZoomOut" type="button">-</button>
						<button id="BtnZoomFull" type="button">&#9635</button>
					</div>
				</div>

				<div id="TimelineContainer">
					<ul id="Timeline">
						<li v-for="item in dateList" class="TimeLineDateBox">
							{{ item.toLocaleString("en-us", { month: "long" }) }}
							<br>
							{{ item.getDate() }}
						</li>
					</ul>
					<div id="TimelineFrame">
						<div id="TimelineCoverLeft" class="TimelineCover"></div>
						<div id="TimelineCoverRight" class="TimelineCover"></div>
					</div>
				</div>

				<input id="AnimationSlider" type="range" min="0" v-bind:max="dateList.length" value="0">

				<div id="ControlButtonsContainer">
					<button id="BtnSeekStart" type="button">|&lt;</button>
					<button id="BtnStepBack" type="button">&lt;</button>
					<button id="BtnPlay" type="button">&#9658;</button>
					<button id="BtnStepForward" type="button">></button>
					<button id="BtnPause" type="button">||</button>
					<button id="BtnSeekEnd" type="button">>|</button>
				</div>
				
				<div class="RangeKeyPanel">
					<div class="ColorKeyContainer" v-for="(item, index) in colorGradients">
						<div class="ColorKey" v-bind:style="{ backgroundImage:'linear-gradient(to right,' + item.start + ',' + item.end + ')' }"></div>
						<div>>{{ colorRanges[index].min }} to {{ colorRanges[index].max }}</div>
					</div>
				</div>
				<div class="RangeKeyPanel">
					<div class="ColorKeyContainer">
						<div class="ColorKey" v-bind:style="{ backgroundColor: zeroValueColor }"></div>
						<div>Zero Value</div>
					</div>
					<div class="ColorKeyContainer">
						<div class="ColorKey" v-bind:style="{ backgroundColor: unknownValueColor }"></div>
						<div>Unknown Value</div>
					</div>
				</div>
			</div>
			
			<div id="InformationColumn">
				<div id="InformationPanel">
					<div class="InformationCard TitleCard">
						<h3>{{ (displayDate === null) ? "" : (displayDate.toLocaleString("en-us", { month: "long" }) + " " + displayDate.getDate()) }}</h3>
					</div>
					<div v-for="item in infoCards" class="InformationCard">
						<h4>{{ item.placeName }}</h4>
						<button v-bind:id="'BtnRemoveCard_' + item.id" class="InfoCardRemovalButton">X</button>
						<table class="CountyInfoCardTable">
							<thead>
								<tr>
									<th></th>
									<th></th>
									<th colspan="2">Absolute</th>
									<th>{{ cardCol2Title }}</th>
									<th colspan="2">Per Case (fatality rate)</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<th rowspan="2" class="InfoCardLeftMainTitle">CASES</th>
									<th class="InfoCardLeftSecondaryTitle">to-date total</th>
									<td v-bind:class="{ CurrentFact: isCurrentFact('casesAbsolute') }">
										{{ formatInfoCardDisplayNumber(item.casesAbsolute, true, null) }}
									</td>
									<td class="InfoCardPercentageColumn"></td>
									<td class="InfoCardByPopulationColumn" v-bind:class="{ CurrentFact: isCurrentFact('casesByPopulation') }">
										{{ formatInfoCardDisplayNumber(item.casesByPopulation, false, 4) }}
									</td>
									<td colspan="2">-</td>
								</tr>
								<tr>
									<th class="InfoCardLeftSecondaryTitle">{{ growthRangeDays }}-day change</th>
									<td v-bind:class="{ CurrentFact: isCurrentFact('casesAbsoluteChange') }">
										{{ formatInfoCardDisplayNumber(item.casesAbsoluteChange, true, null) }}
									</td>
									<td class="InfoCardPercentageColumn" v-bind:class="{ CurrentFact: isCurrentFact('casesChangePercentage') }">
										({{ formatInfoCardDisplayNumber(item.casesChangePercentage, false, 3) }} %)
									</td>
									<td class="InfoCardByPopulationColumn" v-bind:class="{ CurrentFact: isCurrentFact('casesByPopulationChange') }">
										{{ formatInfoCardDisplayNumber(item.casesByPopulationChange, false, 4) }}
									</td>
									<td colspan="2">-</td>
								</tr>
								<tr class="DeathRow">
									<th rowspan="2" class="InfoCardLeftMainTitle">DEATHS</th>
									<th class="InfoCardLeftSecondaryTitle">to-date total</th>
									<td v-bind:class="{ CurrentFact: isCurrentFact('deathsAbsolute') }">
										{{ formatInfoCardDisplayNumber(item.deathsAbsolute, true, null) }}
									</td>
									<td class="InfoCardPercentageColumn"></td>
									<td class="InfoCardByPopulationColumn" v-bind:class="{ CurrentFact: isCurrentFact('deathsByPopulation') }">
										{{ formatInfoCardDisplayNumber(item.deathsByPopulation, false, 4) }}
									</td>
									<td v-bind:class="{ CurrentFact: isCurrentFact('deathsPerCase') }">
										{{ formatInfoCardDisplayNumber(item.deathsPerCase, false, 4) }}
									</td>
									<td></td>
								</tr>
								<tr>
									<th class="InfoCardLeftSecondaryTitle">{{ growthRangeDays }}-day change</th>
									<td v-bind:class="{ CurrentFact: isCurrentFact('deathsAbsoluteChange') }">
										{{ formatInfoCardDisplayNumber(item.deathsAbsoluteChange, true, null) }}
									</td>
									<td class="InfoCardPercentageColumn" v-bind:class="{ CurrentFact: isCurrentFact('deathsChangePercentage') }">
										({{ formatInfoCardDisplayNumber(item.deathsChangePercentage, false, 3) }}%)
									</td>
									<td class="InfoCardByPopulationColumn" v-bind:class="{ CurrentFact: isCurrentFact('deathsByPopulationChange') }">
										{{ formatInfoCardDisplayNumber(item.deathsByPopulationChange, false, 4) }}
									</td>
									<td v-bind:class="{ CurrentFact: isCurrentFact('deathsPerCaseChange') }">
										{{ formatInfoCardDisplayNumber(item.deathsPerCaseChange, false, 4) }}
									</td>
									<td v-bind:class="{ CurrentFact: isCurrentFact('deathsPerCaseChangePercentage') }">
										({{ formatInfoCardDisplayNumber(item.deathsPerCaseChangePercentage, false, 4) }} %)
									</td>
								</tr>
							</tbody>
						</table>
					</div>

					<div class="InformationCard" v-bind:style="{ display: infoCardInstructionDisplay }">
						Double-click any county on the map to track its data here.
					</div>

					<div id="tempconsole" class="InformationCard"> <!-- REMOVE CODE HERE -->
						<div v-for="item in consoleEntries">{{ item }}</div>
					</div>
				</div>
			</div>
		</div>

		<div id="ConfigurationModalBackground" v-bind:style="{ display: configurationBoxDisplay }">
		</div>
		<div id="ConfigurationBox" v-bind:style="{ display: configurationBoxDisplay }">
			<h3>Animated Report Configuration</h3>
			<div class="ConfigurationRadioGroup">
				<h4>Basic Fact to Report:</h4>
				<input id="RdoFactCases" type="radio" v-bind:value="BasicFactType.Cases" v-model="configBasicFact">
				<label for="RdoFactCases">Cumulative Cases</label>
				<br>
				<input id="RdoFactDeaths" type="radio" v-bind:value="BasicFactType.Deaths" v-model="configBasicFact">
				<label for="RdoFactDeaths">Cumulative Deaths</label>
			</div>

			<div class="ConfigurationRadioGroup">
				<h4>Measurement:</h4>
				<input id="RdoMeasurementAbsolute" type="radio" v-bind:value="MeasurementType.Absolute" v-model="configMeasurement">
				<label for="RdoMeasurementAbsolute">Absolute</label>
				<br>
				<input id="RdoMeasurementPopulationRelative" type="radio" v-bind:value="MeasurementType.PopulationRelative" v-model="configMeasurement">
				<label for="RdoMeasurementPopulationRelative">
					Per
					<select v-model="populationScale">
						<option v-bind:value="100">100 (percentage)</option>
						<option v-bind:value="1000">1,000</option>
						<option v-bind:value="10000">10,000</option>
						<option v-bind:value="100000">100,000</option>
						<option v-bind:value="1000000">1,000,000</option>
					</select>
					Persons</label>
				<br>
				<input id="RdoMeasurementCaseRelative" type="radio" v-bind:value="MeasurementType.CaseRelative" v-model="configMeasurement">
				<label for="RdoMeasurementCaseRelative">Per Case (Fatality Rate)</label>
			</div>

			<div class="ConfigurationRadioGroup">
				<h4>Value to Display:</h4>
				<table>
					<tr>
						<td>
							<input id="RdoViewDailyValue" type="radio" v-bind:value="DataViewType.DailyValue" v-model="configDataView">
							<label for="RdoViewDailyValue">Daily Value</label>
						</td>
						<td></td>
					</tr>
					<tr>
						<td id="GrowthAbsoluteChoiceCell">
							<input id="RdoViewChangeAbsolute" type="radio" v-bind:value="DataViewType.ChangeAbsolute" v-model="configDataView">
							<label for="RdoViewChangeAbsolute">Change (Absolute)</label>
						</td>
						<td id="GrowthRangeChoiceCell" rowspan="2">
							over the preceding
							<select v-model="growthRangeDays">
								<option v-bind:value="1">24 hours</option>
								<option v-bind:value="3">3 days</option>
								<option v-bind:value="5">5 days</option>
								<option v-bind:value="7">7 days</option>
								<option v-bind:value="14">2 weeks</option>
								<option v-bind:value="21">3 weeks</option>
								<option v-bind:value="28">4 weeks</option>
							</select>
						</td>
					<tr>
						<td id="GrowthProportionalChoiceCell">
							<input id="RdoViewChangeProportional" type="radio" v-bind:value="DataViewType.ChangeProportional" v-model="configDataView">
							<label for="RdoViewChangeProportional">Change (Proportional)</label>
						</td>
						<td>
						</td>
					</tr>
				</table>
				<br>
			</div>

			<div id="ConfigurationButtons">
				<button id="BtnApplyConfigChanges" type="button">Apply</button>
				<button id="BtnCancelConfigChanges" type="button">Cancel</button>
			</div>
		</div>

		<div id="WaitBox" v-bind:style="{ display: waitMessageDisplay }">
			<div id="WaitMessageBox">{{ waitMessage }}</div>
		</div>
	</div>

	<script type="text/javascript" src="scripts/papaparse.js"></script>
	<script type="module" src="modules/appUI.js"></script>
</body>
</html>
